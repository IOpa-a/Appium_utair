## Java + Appium + Cucumber  
***
### Для запуска нужно:  ###
+ Java 1.8.0_261  
+ Android Studio и Android SDK  
+ Appium  
+ IntelliJ IDEA Community Edition 2020.2.4  
+ Плагин для IDEA "Cucumber for Java"  

[Первоначальную настройку делал по этой статье](https://habr.com/ru/post/452742/ "habr")  
***  
### Запуск:  ###
+ Запустить IntelliJ IDEA
+ Установить плагин "Cucumber for Java" (settings -> plugins)
+ Установить тестируемое приложение
+ Подключить девайс (в моем случаи подключал реальное устройство)
+ Запустить сервер Appium
+ В классе "Driver" задать параметры:  
  > DEVICE_NAME (имя девайса)  
  > PLATFORM_VERSION (версию платформы)  
  > appPackage (директория приложения)  
  > appActivity (запускаемое активити)  
  > URL (сервер appium)
+ Запустить сценарий: ПКМ(по сценарию) > Run

***
### Директория "hooks" 

#### class "Hooks"  

#####  Аннотация "@Before" - выполняется перед запуском теста 
> Вызывает метод настройки драйвера, инициализация классов и запуска приложения  

#####  Аннотация "@BeforeStep" - выполняется перед каждым шагом сценария  
> Вызывает метод ожидания, для стабильности теста  

#####  Аннотация "@After" - выполняется после прохождения теста  
> Закрывает приложение  

***
### Директория "utils"   
 ####  class "Driver"  
> Настройка и инициализация драйвера  

####  class "RunCucumberTest"  
> Настройка Cucumber  

####  class "Wait"  
> Ожидание  

***
### Директория "pages"   
> Каждый класс это отдельное активити в приложении, класс содержит методы поиска элемента по xpath и возврат "MobileElement"  
> Также есть базовые методы, например "swipe"  
***
### Директория "resources"  
> Содержит тесткейсы "Cucumber" написанные на языке "Gherkin"  
***
### Директория "step"  
> Содержит методы с реализацией шагов из тесткейсов "Cucumber"  

***
#### При запуске тесткейса сначала вызывается метод с аннотацией @Before, запускается приложение  
#### Далее Cucumber выполняет шаг Gherkin в сценарии.  

   > И заполнить поля:  
   >  | Откуда | Москва |  

#### Cucumber обращается к директории "step" для поиска реализации шага. Реализация этого шага находится в классе "BaseStep", в методе запрашивается "MobileElement" у страницы "BasePage", после получения элемента поле заполняется передаваемым значением, в данном случаи "Москва"    

   > Тогда город вылета "Москва" выбран  

#### Также переходит в реализацию шага и запрашивает поле у класса страницы, у поля получает "value" и сравнивает передаваемое значение через "Assert"
